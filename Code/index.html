<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        if (localStorage.getItem("data") == null){
            json_data= {"holes":[ {"hole_id": 1, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 2, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 3, "par": 0, "hcp": 0, "hits":0},
            {"hole_id": 4, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 5, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 6, "par": 0, "hcp": 0, "hits":0},
            {"hole_id": 7, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 8, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 9, "par": 0, "hcp": 0, "hits":0},
            {"hole_id": 10, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 11, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 12, "par": 0, "hcp": 0, "hits":0},
            {"hole_id": 13, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 14, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 15, "par": 0, "hcp": 0, "hits":0},
            {"hole_id": 16, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 17, "par": 0, "hcp": 0, "hits":0}, {"hole_id": 18, "par": 0, "hcp": 0, "hits":0}]}
            localStorage.setItem("data", JSON.stringify(json_data))
        }
        else {
            let data = localStorage.getItem("data")
             json_data = JSON.parse(data)
        }
        </script>
    <style>
        #container {
            margin-top: 20px;
            width: 300px;
            border: 3px solid black;
            padding: 40px 40px 40px 40px;
            display: none
        }
        #container2 {
            margin-top: 20px;
            width: 600px;
            border: 3px solid black;
            padding: 40px 40px 40px 40px;
            display: none
        }
        input{
            margin-bottom: 5px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <input type="button" id="new_course" value="Neuer Kurs" onclick="show_container()">
    <input type="button" id="generate_fields" value="Neues 18-loch" onclick="generateFields()">
    <div id="container2">
        <input type="button" id="save18_hole" value="18 Loch speichern" onclick="save_inputs()">
    </div>
    <script>
        function generateFields() {
            let container = document.getElementById("container2");
            let inputs = container.querySelectorAll("input[type=text]");
            inputs.forEach(input => input.remove());
            container.style.display = "block"

            for (let i = 1; i <= 18; i++) {
                let div = document.createElement("div");
                div.className = "input-group";

                let input1 = document.createElement("input");
                input1.type = "text";
                input1.placeholder = `par - Loch ${i}`;
                input1.id = `par${i}`
                //input1.defaultValue = 0

                let input2 = document.createElement("input");
                input2.type = "text";
                input2.placeholder = `hcp - Loch ${i}`;
                input2.id = `hcp${i}`
                //input2.defaultValue = 0

                let input3 = document.createElement("input");
                input3.type = "text";
                input3.placeholder = `hits - Loch ${i}`;
                input3.id = `hits${i}`
                //input3.defaultValue = 0

                div.appendChild(input1);
                div.appendChild(input2);
                div.appendChild(input3);

                container.appendChild(div);
            }
        }
        function save_inputs(){
            let json_data = JSON.parse(localStorage.getItem("data"));
            for (let i = 1; i <= 18; i++) {
                let par = document.getElementById(`par${i}`).value || 0;
                let hcp = document.getElementById(`hcp${i}`).value || 0;
                let hits = document.getElementById(`hits${i}`).value || 0;

                // Setze die Werte im JSON-Objekt
                json_data.holes[i - 1].par = par ? parseInt(par) : 0;
                json_data.holes[i - 1].hcp = hcp ? parseInt(hcp) : 0;
                json_data.holes[i - 1].hits = hits ? parseInt(hits) : 0;
            }
            console.log(JSON.stringify(json_data));
            localStorage.setItem("holedata", JSON.stringify(json_data))
        }

        function show_container(){
            let container = document.getElementById("container");
            if (container.style.display == "none"){
                container.style.display = "block"
            }
            else{
                container.style.display = "none"
            }
        }
    </script>
    <div id="container">
        <input type="field" id="slope" placeholder="slope rating">
        <input type="field" name="course_rating" id="course_rating" placeholder="course_rating">
        <input type="field" id="par" placeholder="par">
        <input type="button" id="save" value="save course" onclick="save_course">
    </div>
    <script>
        function save_course(){

        }
    </script>
</body>
</html>